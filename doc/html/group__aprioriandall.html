<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Apriori and AprioriAll in C#: Apriori and AprioriAll</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="project_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Apriori and AprioriAll in C#
   &#160;<span id="projectnumber">version 2.1.0</span>
   </div>
   <div id="projectbrief">serialized version with prefix trees, parallel version with OpenCL</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__aprioriandall.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Apriori and AprioriAll</div>  </div>
</div><!--header-->
<div class="contents">

<p>The core part of the implementation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriori_all_lib_1_1_apriori.html">AprioriAllLib.Apriori</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to get list of large itemsets from a set of customers' transactions.  <a href="class_apriori_all_lib_1_1_apriori.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_apriori_all_lib_1_1_apriori_all.html">AprioriAllLib.AprioriAll</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_apriori_all_lib_1_1_apriori_all.html" title="AprioriAll algorithm implementation. ">AprioriAll</a> algorithm implementation.  <a href="class_apriori_all_lib_1_1_apriori_all.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga534be538e02769b9ad37ef30271396c9"><td class="memItemLeft" align="right" valign="top">List&lt; Litemset &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aprioriandall.html#ga534be538e02769b9ad37ef30271396c9">AprioriAllLib.Apriori.RunApriori</a> (double minimalSupport, bool progressOutput)</td></tr>
<tr class="memdesc:ga534be538e02769b9ad37ef30271396c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds all litemsets that have the minimal support.  <a href="#ga534be538e02769b9ad37ef30271396c9"></a><br/></td></tr>
<tr class="separator:ga534be538e02769b9ad37ef30271396c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga719d1c07f93fa2e82e1ae6dcacbb8efe"><td class="memItemLeft" align="right" valign="top">List&lt; Customer &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aprioriandall.html#ga719d1c07f93fa2e82e1ae6dcacbb8efe">AprioriAllLib.AprioriAll.RunAprioriAll</a> (double threshold, bool progressOutput)</td></tr>
<tr class="memdesc:ga719d1c07f93fa2e82e1ae6dcacbb8efe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes <a class="el" href="class_apriori_all_lib_1_1_apriori_all.html" title="AprioriAll algorithm implementation. ">AprioriAll</a> algorithm on a given input and minimum suport threshold.  <a href="#ga719d1c07f93fa2e82e1ae6dcacbb8efe"></a><br/></td></tr>
<tr class="separator:ga719d1c07f93fa2e82e1ae6dcacbb8efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The core part of the implementation. </p>
<p>Although the algorithm utilizes many classes, the following entries are the most important and can give an overview of the whole implementation. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga534be538e02769b9ad37ef30271396c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;Litemset&gt; AprioriAllLib.Apriori.RunApriori </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>minimalSupport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>progressOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds all litemsets that have the minimal support. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">minimalSupport</td><td>minimal support</td></tr>
    <tr><td class="paramname">progressOutput</td><td>if true, information about progress is sent to standard output</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of Litemsets with support &gt;= minimalSupport</dd></dl>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (minimalSupport &gt; 1 || minimalSupport &lt;= 0)</div>
<div class="line">                <span class="keywordflow">return</span> null;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a> == null)</div>
<div class="line">                <span class="keywordflow">return</span> null;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>.Count == 0)</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;Litemset&gt;();</div>
<div class="line"></div>
<div class="line">            <span class="comment">//common part - initialization</span></div>
<div class="line">            minimalSupport *= <a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>.Count;</div>
<div class="line">            List&lt;Litemset&gt; litemsets = <span class="keyword">new</span> List&lt;Litemset&gt;();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// serialized version of the algorithm</span></div>
<div class="line"></div>
<div class="line">            Stopwatch watch = null;</div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">            {</div>
<div class="line">                watch = <span class="keyword">new</span> Stopwatch();</div>
<div class="line">                watch.Start();</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">//int cIndex = 0;</span></div>
<div class="line">            <span class="keywordflow">foreach</span> (Customer c <span class="keywordflow">in</span> <a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">foreach</span> (Transaction t <span class="keywordflow">in</span> c.Transactions)</div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">//generate subsets (candidates for litemsets)</span></div>
<div class="line">                    List&lt;Litemset&gt; candidateLitemsets = <a class="code" href="class_apriori_all_lib_1_1_apriori.html#a992b4de76d19dcef78a45a0752725977" title="Produces all subsets of a given list of items in a transaction. ">GenerateCandidateLitemsets</a>(t.Items);</div>
<div class="line"></div>
<div class="line">                    <span class="comment">//check if they already exist in litemsets list; if not, add a litemset to litemsets</span></div>
<div class="line">                    <span class="keywordflow">foreach</span> (Litemset lset <span class="keywordflow">in</span> candidateLitemsets)</div>
<div class="line">                    {</div>
<div class="line">                        IEnumerable&lt;Litemset&gt; l = litemsets.Where(litemset =&gt; (litemset.Items.Count == lset.Items.Count) &amp;&amp;</div>
<div class="line">                             litemset.Items.All(item =&gt; lset.Items.Exists(lsetItem =&gt; lsetItem.CompareTo(item) == 0)));</div>
<div class="line"></div>
<div class="line">                        <span class="keywordtype">int</span> custID = <a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>.IndexOf(c);</div>
<div class="line">                        <span class="keywordflow">if</span> (l.Count() == 0 &amp;&amp; !lset.IDs.Contains(custID))</div>
<div class="line">                        {</div>
<div class="line">                            litemsets.Add(lset);</div>
<div class="line">                            lset.Support++;</div>
<div class="line">                            lset.IDs.Add(custID);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">else</span></div>
<div class="line">                        {</div>
<div class="line">                            Litemset litset = l.FirstOrDefault();</div>
<div class="line">                            <span class="keywordflow">if</span> (!litset.IDs.Contains(custID))</div>
<div class="line">                            {</div>
<div class="line">                                litset.Support++;</div>
<div class="line">                                litset.IDs.Add(custID);</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="comment">//if (progressOutput)</span></div>
<div class="line">                <span class="comment">//{</span></div>
<div class="line">                <span class="comment">//  if (cIndex % 10 == 9)</span></div>
<div class="line">                <span class="comment">//  {</span></div>
<div class="line">                <span class="comment">//      watch.Stop();</span></div>
<div class="line">                <span class="comment">//      Log.Write(&quot;{0}ms &quot;, watch.ElapsedMilliseconds);</span></div>
<div class="line">                <span class="comment">//      watch.Start();</span></div>
<div class="line">                <span class="comment">//  }</span></div>
<div class="line">                <span class="comment">//  ++cIndex;</span></div>
<div class="line">                <span class="comment">//}</span></div>
<div class="line"></div>
<div class="line">            }</div>
<div class="line">            <span class="comment">//if (progressOutput)</span></div>
<div class="line">            <span class="comment">//{</span></div>
<div class="line">            <span class="comment">//  Log.WriteLine();</span></div>
<div class="line">            <span class="comment">//}</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Found {0} subsets.&quot;</span>, litemsets.Count);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// rewrite the litemsets with support &gt;= minimum to a new list</span></div>
<div class="line">            List&lt;Litemset&gt; properLitemsets = <span class="keyword">new</span> List&lt;Litemset&gt;();</div>
<div class="line">            <span class="keywordflow">foreach</span> (Litemset litemset <span class="keywordflow">in</span> litemsets)</div>
<div class="line">                <span class="keywordflow">if</span> (litemset.Support &gt;= minimalSupport)</div>
<div class="line">                    properLitemsets.Add(litemset);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Purged unsupported, {0} remain.&quot;</span>, properLitemsets.Count);</div>
<div class="line"></div>
<div class="line">            properLitemsets.Sort();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Sorted output.&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">            {</div>
<div class="line">                watch.Stop();</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Generated all litemsets, found {0} in {1}ms.&quot;</span>, properLitemsets.Count, watch.ElapsedMilliseconds);</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">return</span> properLitemsets;</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__aprioriandall_ga534be538e02769b9ad37ef30271396c9_cgraph.png" border="0" usemap="#group__aprioriandall_ga534be538e02769b9ad37ef30271396c9_cgraph" alt=""/></div>
<map name="group__aprioriandall_ga534be538e02769b9ad37ef30271396c9_cgraph" id="group__aprioriandall_ga534be538e02769b9ad37ef30271396c9_cgraph">
<area shape="rect" id="node3" href="class_apriori_all_lib_1_1_apriori.html#a992b4de76d19dcef78a45a0752725977" title="Produces all subsets of a given list of items in a transaction. " alt="" coords="213,5,403,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga719d1c07f93fa2e82e1ae6dcacbb8efe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;Customer&gt; AprioriAllLib.AprioriAll.RunAprioriAll </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>progressOutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes <a class="el" href="class_apriori_all_lib_1_1_apriori_all.html" title="AprioriAll algorithm implementation. ">AprioriAll</a> algorithm on a given input and minimum suport threshold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threshold</td><td>greater than 0, and less or equal 1</td></tr>
    <tr><td class="paramname">progressOutput</td><td>if true, information about progress is sent to standard output</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of frequently occurring customers transaction's patters</dd></dl>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a> == null)</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="stringliteral">&quot;customers list is null&quot;</span>, <span class="stringliteral">&quot;customerList&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (threshold &gt; 1 || threshold &lt;= 0)</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;threshold is out of range = (0,1]&quot;</span>, <span class="stringliteral">&quot;threshold&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordtype">int</span> minSupport = (int)Math.Ceiling((<span class="keywordtype">double</span>)<a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>.Count * threshold);</div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Threshold = {0}  =&gt;  Minimum support = {1}&quot;</span>, threshold, minSupport);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (minSupport &lt;= 0)</div>
<div class="line">                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;minimum support must be positive&quot;</span>, <span class="stringliteral">&quot;minSupport&quot;</span>);</div>
<div class="line"></div>
<div class="line">            Stopwatch totalTimeTaken = <span class="keyword">new</span> Stopwatch();</div>
<div class="line">            totalTimeTaken.Start();</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 1. sort the input!</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;1) Sort Phase - list is already sorted as user sees fit&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// corresponds to 1st step of AprioriAll algorithm, namely &quot;Sort Phase&quot;.</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// already done because input is sorted by the user in an apropriate way</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// 2. find all frequent 1-sequences</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;2) Litemset Phase&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Launching Apriori...&quot;</span>);</div>
<div class="line">            <span class="comment">// this corresponds to 2nd step of AprioriAll algorithm, namely &quot;Litemset Phase&quot;.</span></div>
<div class="line">            List&lt;Litemset&gt; oneLitemsets = <a class="code" href="class_apriori_all_lib_1_1_apriori.html#a91d0b11de53dab28769f1d7fda0542c6" title="Finds all litemsets that have the minimal support. ">RunApriori</a>(threshold, progressOutput);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 3. transform input into list of IDs</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;3) Transformation Phase&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 3.a) give an ID to each 1-seq</span></div>
<div class="line">            Dictionary&lt;Litemset, int&gt; encoding;</div>
<div class="line">            Dictionary&lt;int, Litemset&gt; decoding;</div>
<div class="line"></div>
<div class="line">            <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#a1d9069babd9e846baf093edb597ee35f" title="Generates encoding and decoding dictionaries for a given set of 1-sequences (large itemsets)...">GenerateEncoding</a>(oneLitemsets, out encoding, out decoding);</div>
<div class="line"></div>
<div class="line">            Dictionary&lt;int, List&lt;int&gt;&gt; litemsetsContaining = <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#a15b51c2de9a3d1a84559c2f3fb642b3d" title="Generates a dictionary that remembers for every litemset x: litemsets that contain x...">GenerateContainmentRules</a>(oneLitemsets, encoding);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">            {</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Encoding dictionary for litemsets:&quot;</span>);</div>
<div class="line">                <span class="keywordflow">foreach</span> (KeyValuePair&lt;int, Litemset&gt; kv <span class="keywordflow">in</span> decoding)</div>
<div class="line">                {</div>
<div class="line">                    Log.Write(<span class="stringliteral">&quot; {0} &lt;= {1}&quot;</span>, kv.Key, kv.Value);</div>
<div class="line">                    <span class="keywordflow">if</span> (litemsetsContaining.ContainsKey(kv.Key))</div>
<div class="line">                    {</div>
<div class="line">                        List&lt;int&gt; superLitemsets = litemsetsContaining[kv.Key];</div>
<div class="line">                        Log.Write(<span class="stringliteral">&quot;; {0} is in {1}&quot;</span>, kv.Key, String.Join(<span class="stringliteral">&quot;, &quot;</span>, superLitemsets.ToArray()));</div>
<div class="line">                    }</div>
<div class="line">                    Log.WriteLine(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">//if (progressOutput)</span></div>
<div class="line">            <span class="comment">//{</span></div>
<div class="line">            <span class="comment">//  Console.Out.WriteLine(&quot;Containment rules for litemsets:&quot;);</span></div>
<div class="line">            <span class="comment">//  foreach (KeyValuePair&lt;int, List&lt;int&gt;&gt; kv in litemsetsContaining)</span></div>
<div class="line">            <span class="comment">//      Console.Out.WriteLine(&quot; {0} is in {1}&quot;, kv.Key, String.Join(&quot;, &quot;, kv.Value.ToArray()));</span></div>
<div class="line">            <span class="comment">//}</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// 3.b) using created IDs, transform the input</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// list of lists of list of IDs:</span></div>
<div class="line">            <span class="comment">// - each list of IDs is a frequent itemset</span></div>
<div class="line">            <span class="comment">// - list of those means a list of frequent itemsets, </span></div>
<div class="line">            <span class="comment">//   meaning a list of transaction represented as a list of frequent </span></div>
<div class="line">            <span class="comment">//   itemsets performed by one customer</span></div>
<div class="line">            <span class="comment">// - outer list means list of customers</span></div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Encoding input data...&quot;</span>);</div>
<div class="line">            var encodedList = <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#a4030f2db6e2216c8adc5b9e182f14769" title="Corresponds to 3rd step of AprioriAll algorithm, namely &quot;Transformation Phase&quot;. ">EncodeCustomerList</a>(oneLitemsets, encoding);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput &amp;&amp; encodedList.Count &lt;= 100)</div>
<div class="line">            {</div>
<div class="line">                var customersEnumerator = <a class="code" href="class_apriori_all_lib_1_1_apriori.html#abbca8be3761136e76782ce10ebd61638" title="Input data for the algorithm. ">customerList</a>.<a class="code" href="class_apriori_all_lib_1_1_customer_list.html#a4fd2a16a984844e61ffc60b327e6534a" title="List of Customers ">Customers</a>.GetEnumerator();</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;How the input is encoded:&quot;</span>);</div>
<div class="line">                <span class="keywordflow">foreach</span> (List&lt;List&lt;int&gt;&gt; c <span class="keywordflow">in</span> encodedList)</div>
<div class="line">                {</div>
<div class="line">                    customersEnumerator.MoveNext();</div>
<div class="line">                    <span class="comment">//var transactionsEnumerator = customersEnumerator.Current.Transactions.GetEnumerator();</span></div>
<div class="line">                    Log.Write(<span class="stringliteral">&quot; - {0} =&gt; (&quot;</span>, customersEnumerator.Current);</div>
<div class="line">                    <span class="keywordflow">foreach</span> (List&lt;int&gt; t <span class="keywordflow">in</span> c)</div>
<div class="line">                    {</div>
<div class="line">                        <span class="comment">//transactionsEnumerator.MoveNext();</span></div>
<div class="line">                        <span class="comment">//var itemsEnumerator = transactionsEnumerator.Current.Items.GetEnumerator();</span></div>
<div class="line">                        Log.Write(<span class="stringliteral">&quot;{&quot;</span>);</div>
<div class="line">                        <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line">                        <span class="keywordflow">foreach</span> (<span class="keywordtype">int</span> i <span class="keywordflow">in</span> t)</div>
<div class="line">                        {</div>
<div class="line">                            <span class="comment">//itemsEnumerator.MoveNext();</span></div>
<div class="line">                            <span class="keywordflow">if</span> (!first)</div>
<div class="line">                                Log.Write(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">                            <span class="keywordflow">if</span> (first)</div>
<div class="line">                                first = <span class="keyword">false</span>;</div>
<div class="line">                            Log.Write(<span class="stringliteral">&quot;{0}&quot;</span>, i);</div>
<div class="line">                        }</div>
<div class="line">                        Log.Write(<span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line">                    }</div>
<div class="line">                    Log.WriteLine(<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 4. find all frequent sequences in the input</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;4) Sequence Phase&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Searching for all possible k-sequences&quot;</span>);</div>
<div class="line">            var kSequences = <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#ac2dcc7319c4ce12107410a26039f16ac" title="Corresponds to 4th step of AprioriAll algorithm, namely &quot;Sequence Phase&quot;. ">FindAllFrequentSequences</a>(oneLitemsets, encoding, encodedList, litemsetsContaining,</div>
<div class="line">                minSupport, progressOutput);</div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Maximal k is {0}.&quot;</span>, kSequences.Count - 2);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 5. purge all non-maximal sequences</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;5) Maximal Phase&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Purging all non-maximal sequences...&quot;</span>);</div>
<div class="line">            <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#a9f96a735cce2f04d31f0d82345ef6f7d" title="Deletes all non-maximal seqences from list of k-sequences.">PurgeAllNonMax</a>(kSequences, litemsetsContaining, oneLitemsets.Count, progressOutput);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 6. decode results</span></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;Decoding results and purging again...&quot;</span>);</div>
<div class="line">            var decodedList = <a class="code" href="class_apriori_all_lib_1_1_apriori_all.html#ad0e1764626e9c890583e7f1e5783d51e" title="Prepares cleaned-up and user-ready data that can be used as final output of AprioriAll algoritm...">InferRealResults</a>(encodedList, kSequences, decoding);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (progressOutput)</div>
<div class="line">            {</div>
<div class="line">                var decodedEnumerator = decodedList.GetEnumerator();</div>
<div class="line">                Log.WriteLine(<span class="stringliteral">&quot;How maximal sequences are decoded:&quot;</span>);</div>
<div class="line">                <span class="keywordflow">foreach</span> (List&lt;List&lt;int&gt;&gt; kSequencesPartition <span class="keywordflow">in</span> kSequences)</div>
<div class="line">                    <span class="keywordflow">foreach</span> (List&lt;int&gt; sequene <span class="keywordflow">in</span> kSequencesPartition)</div>
<div class="line">                    {</div>
<div class="line">                        Log.Write(<span class="stringliteral">&quot; - &lt;&quot;</span>);</div>
<div class="line">                        <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div>
<div class="line">                        <span class="keywordflow">foreach</span> (<span class="keywordtype">int</span> i <span class="keywordflow">in</span> sequene)</div>
<div class="line">                        {</div>
<div class="line">                            <span class="keywordflow">if</span> (!first)</div>
<div class="line">                                Log.Write(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">                            <span class="keywordflow">if</span> (first)</div>
<div class="line">                                first = <span class="keyword">false</span>;</div>
<div class="line">                            Log.Write(<span class="stringliteral">&quot;{0}&quot;</span>, i);</div>
<div class="line">                        }</div>
<div class="line">                        Log.Write(<span class="stringliteral">&quot;&gt;&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">if</span> (decodedEnumerator.MoveNext())</div>
<div class="line">                            Log.Write(<span class="stringliteral">&quot; =&gt; {0}&quot;</span>, decodedEnumerator.Current);</div>
<div class="line">                        Log.WriteLine(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">                    }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            totalTimeTaken.Stop();</div>
<div class="line"></div>
<div class="line">            Log.WriteLine(<span class="stringliteral">&quot; total time taken to complete the algorithm: {0}ms&quot;</span>, totalTimeTaken.ElapsedMilliseconds);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// 7. return results</span></div>
<div class="line">            <span class="keywordflow">return</span> decodedList;</div>
<div class="line">        }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__aprioriandall_ga719d1c07f93fa2e82e1ae6dcacbb8efe_cgraph.png" border="0" usemap="#group__aprioriandall_ga719d1c07f93fa2e82e1ae6dcacbb8efe_cgraph" alt=""/></div>
<map name="group__aprioriandall_ga719d1c07f93fa2e82e1ae6dcacbb8efe_cgraph" id="group__aprioriandall_ga719d1c07f93fa2e82e1ae6dcacbb8efe_cgraph">
<area shape="rect" id="node3" href="class_apriori_all_lib_1_1_apriori.html#a91d0b11de53dab28769f1d7fda0542c6" title="Finds all litemsets that have the minimal support. " alt="" coords="217,5,375,46"/><area shape="rect" id="node5" href="class_apriori_all_lib_1_1_apriori_all.html#a1d9069babd9e846baf093edb597ee35f" title="Generates encoding and decoding dictionaries for a given set of 1&#45;sequences (large itemsets)..." alt="" coords="221,70,371,111"/><area shape="rect" id="node7" href="class_apriori_all_lib_1_1_apriori_all.html#a15b51c2de9a3d1a84559c2f3fb642b3d" title="Generates a dictionary that remembers for every litemset x: litemsets that contain x..." alt="" coords="205,135,387,177"/><area shape="rect" id="node9" href="class_apriori_all_lib_1_1_apriori_all.html#a4030f2db6e2216c8adc5b9e182f14769" title="Corresponds to 3rd step of AprioriAll algorithm, namely &quot;Transformation Phase&quot;. " alt="" coords="221,201,371,242"/><area shape="rect" id="node13" href="class_apriori_all_lib_1_1_apriori_all.html#ac2dcc7319c4ce12107410a26039f16ac" title="Corresponds to 4th step of AprioriAll algorithm, namely &quot;Sequence Phase&quot;. " alt="" coords="207,266,385,307"/><area shape="rect" id="node19" href="class_apriori_all_lib_1_1_apriori_all.html#a9f96a735cce2f04d31f0d82345ef6f7d" title="Deletes all non&#45;maximal seqences from list of k&#45;sequences." alt="" coords="221,365,371,406"/><area shape="rect" id="node27" href="class_apriori_all_lib_1_1_apriori_all.html#ad0e1764626e9c890583e7f1e5783d51e" title="Prepares cleaned&#45;up and user&#45;ready data that can be used as final output of AprioriAll algoritm..." alt="" coords="221,470,371,511"/><area shape="rect" id="node11" href="class_apriori_all_lib_1_1_item.html#a69489ac60415029faf0dc3e7dc926e62" title="AprioriAllLib.Item.Equals" alt="" coords="477,149,641,176"/><area shape="rect" id="node15" href="class_apriori_all_lib_1_1_apriori_all.html#ab713206403728597418b85b971cceb68" title="Generates all candidates for k&#45;sequences, basing on set of (k&#45;1)&#45;sequences. " alt="" coords="483,201,634,242"/><area shape="rect" id="node17" href="class_apriori_all_lib_1_1_apriori_all.html#af4fb4eb42f8678f318d77638306fc27c" title="Tries to match the candidate k&#45;sequence to an encoded customer, and returns true if the customer cont..." alt="" coords="440,266,677,307"/><area shape="rect" id="node21" href="class_apriori_all_lib_1_1_apriori_all.html#a35780135d51c22e5cd20ff2c5da7fb1f" title="AprioriAllLib.AprioriAll.\lPurgeUsingInclusionRules" alt="" coords="472,331,645,373"/><area shape="rect" id="node23" href="class_apriori_all_lib_1_1_apriori_all.html#a5e7e5f4c697bfd2571276b7bb89255d2" title="AprioriAllLib.AprioriAll.\lPurgeUsingSequenceInnerRedundancy" alt="" coords="435,397,682,438"/><area shape="rect" id="node25" href="class_apriori_all_lib_1_1_apriori_all.html#ada7deafd303a0ca62e38a5cb5d7baad0" title="AprioriAllLib.AprioriAll.\lPurgeUsingInclusionRulesWithin\lSameSize" alt="" coords="453,463,664,519"/><area shape="rect" id="node29" href="class_apriori_all_lib_1_1_apriori_all.html#aa0a08ca2d1a6ddcd4eb86812c67eb0a8" title="Concatenates all lists of k&#45;sequences into a single list. Does nothing else. " alt="" coords="479,543,639,585"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
